import{r as s,u as E,j as e}from"./index-Dk9IaMJz.js";import{N as P}from"./AdminNavbar-CynIPfJf.js";import{a as D}from"./axios-upsvKRUO.js";import{R as I}from"./quill.snow-MFzqefi0.js";import{L as q,y as d}from"./ReactToastify-B5V0f0bE.js";import"./clsx-B-dksMZM.js";function U(){const[l,u]=s.useState(""),[o,p]=s.useState(""),[n,g]=s.useState(""),[r,h]=s.useState(""),[c,x]=s.useState(""),[i,j]=s.useState(""),[f,v]=s.useState(null),N=E();s.useEffect(()=>{sessionStorage.getItem("userName")||N("/login")},[N]);const b=a=>{v(a.target.files[0])},y=a=>{if(a.preventDefault(),!l||!o||!n||!r||!c||!i){S();return}const t=new FormData;t.append("postDate",l),t.append("category",o),t.append("username",n),t.append("occupation",r),t.append("title",c),t.append("body",i),f&&t.append("blogImage",f),D.post("http://localhost:30001/Blogpost",t,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{console.log(m),B(),u(""),p(""),g(""),h(""),x(""),j(""),v(null),document.getElementById("blogPostForm").reset()}).catch(m=>{console.log(m),C()})},C=()=>{d.warn("An error occurred while saving the blog post.",{autoClose:2e3})},S=()=>{d.warn("Please fill in all fields.",{autoClose:2e3})},B=()=>{d.success("Blog post saved successfully!",{autoClose:2e3})};return e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsx(P,{}),e.jsx("div",{className:"container-fluid mt-4",children:e.jsx("div",{className:"containerblog card p-4",children:e.jsx("form",{id:"blogPostForm",onSubmit:y,children:e.jsx("div",{className:"form first",children:e.jsxs("div",{className:"details personal",children:[e.jsx("h2",{className:"text-center mb-4",children:"Create Blog Post"}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Post Date"}),e.jsx("input",{type:"date",className:"form-control",required:!0,value:l,onChange:a=>u(a.target.value)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Category"}),e.jsx("input",{className:"form-control",placeholder:"Enter Category",list:"categories",required:!0,value:o,onChange:a=>p(a.target.value)}),e.jsxs("datalist",{id:"categories",children:[e.jsx("option",{value:"Sale"}),e.jsx("option",{value:"Marketing"}),e.jsx("option",{value:"Frontend"}),e.jsx("option",{value:"Salesman"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Username"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Username",required:!0,value:n,onChange:a=>g(a.target.value)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Occupation"}),e.jsx("input",{className:"form-control",placeholder:"Enter Occupation",list:"categories",required:!0,value:r,onChange:a=>h(a.target.value)}),e.jsxs("datalist",{id:"categories",children:[e.jsx("option",{value:"Sale"}),e.jsx("option",{value:"Marketing"}),e.jsx("option",{value:"Frontend"}),e.jsx("option",{value:"Salesman"})]})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Title"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Blog Title",required:!0,value:c,onChange:a=>x(a.target.value)})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Body"}),e.jsx(I,{theme:"snow",value:i,onChange:j,placeholder:"Write your blog content here...",className:"responsive-quill"})]}),e.jsxs("div",{className:"col-12 mt-4",children:[e.jsx("label",{className:"form-label",children:"Blog Image"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:b})]}),e.jsx("div",{className:"col-12 text-end",children:e.jsx("button",{className:"btn btn-primary",type:"submit",children:"Post Blog"})})]})]})})})})})]})}export{U as default};
