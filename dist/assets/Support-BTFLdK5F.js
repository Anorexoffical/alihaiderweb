import{r as a,u as C,j as e,N as S,F as w}from"./index-Dk9IaMJz.js";import{a as T}from"./axios-upsvKRUO.js";import{A as k}from"./Avatar-3E0MxidV.js";import"./clsx-B-dksMZM.js";import"./emotion-serialize.esm-DwJ-folU.js";const L=()=>{const[n,p]=a.useState([]),[g,r]=a.useState(!0),[o,u]=a.useState(null),[t,d]=a.useState(1),[l,j]=a.useState(1),[m,N]=a.useState("All"),b=C();a.useEffect(()=>{T.get(`http://localhost:30001/Blogposts?page=${t}&limit=4`).then(s=>{p(s.data.blogs),j(s.data.totalPages),r(!1)}).catch(s=>{console.error("Error fetching blogs:",s),u("Failed to load blogs."),r(!1)})},[t]);const x=s=>{N(s)},f=()=>{t<l&&d(t+1)},v=()=>{t>1&&d(t-1)},y=m==="All"?n:n.filter(s=>s.category===m),P=(s,h)=>{const i=document.createElement("div");i.innerHTML=s;const c=i.textContent||i.innerText||"";return c.length>h?`${c.substring(0,h)}...`:c};return g?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading blogs..."})]}):o?e.jsx("p",{children:o}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mainblogheading",children:[e.jsx("h1",{style:{paddingTop:"1px"}}),e.jsx(S,{}),e.jsx("h1",{className:"blogheading",children:"Hi! How can we Help?"})]}),e.jsxs("div",{className:"py-5 bg-light",children:[e.jsx("h1",{className:"text-center supportheading",children:"Support"}),e.jsxs("div",{className:"text-center my-4",children:[e.jsx("button",{className:"btn btnoutline mx-2",onClick:()=>x("All"),children:"All"}),[...new Set(n.map(s=>s.category))].map(s=>e.jsx("button",{className:"btn btnoutline mx-2",onClick:()=>x(s),children:s},s))]}),e.jsx("div",{className:"container mt-9",style:{marginTop:"100px"},children:y.map(s=>e.jsxs("div",{className:"row mb-5",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("img",{className:"img-fluid rounded",src:s.blogImage?`http://localhost:30001/uploads/${s.blogImage}`:"default-placeholder.jpg",alt:s.title})}),e.jsxs("div",{className:"col-md-8 d-flex flex-column justify-content-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-muted mb-1",children:[s.postDate," | ",e.jsx("span",{className:"badge bgcolor ms-2",children:s.category})]}),e.jsx("h2",{className:"h4 mb-3",children:s.title}),e.jsx("p",{className:"text-secondary",children:P(s.body,200)}),e.jsx("button",{className:"btn btn-link p-0",onClick:()=>b(`/BlogDetail/${s._id}`),children:"Read More"})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(k,{alt:s.username,src:s.userImage||"/default-avatar.jpg",sx:{width:40,height:40}}),e.jsxs("div",{className:"ms-2",children:[e.jsx("p",{className:"mb-0 fw-bold",children:s.username}),e.jsx("p",{className:"mb-0 text-muted",children:s.occupation})]})]})]})]},s._id))}),e.jsxs("div",{className:"pagination-container",children:[e.jsx("button",{className:"pagination-btn",onClick:v,disabled:t===1,children:"Previous"}),e.jsxs("span",{className:"pagination-text",children:["Page ",t," of ",l]}),e.jsx("button",{className:"pagination-btn",onClick:f,disabled:t===l,children:"Next"})]})]}),e.jsx(w,{})]})};export{L as default};
