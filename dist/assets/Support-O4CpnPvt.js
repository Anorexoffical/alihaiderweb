import{r as a,u as P,j as e}from"./index-XqtgtB4L.js";import{a as C}from"./index-DW_MHI2K.js";import{N as S}from"./Navbar-DqyI8etN.js";import w from"./Footer-n64Xac5R.js";import{A as E}from"./Avatar-DEkFnkXS.js";import"./index-CbOGGaJ3.js";/* empty css               */import"./logo-TELqML9G.js";import"./clsx-B-dksMZM.js";import"./emotion-element-5486c51c.browser.esm-Dse1Xu1W.js";const R=()=>{const[l,p]=a.useState([]),[g,o]=a.useState(!0),[c,u]=a.useState(null),[t,d]=a.useState(1),[i,j]=a.useState(1),[m,N]=a.useState("All"),b=P();a.useEffect(()=>{C.get(`https://icellmobile.co.za/api/Blogposts?page=${t}&limit=4`).then(s=>{if(console.log("API Response:",s.data),s.data&&Array.isArray(s.data.blogs))p(s.data.blogs),j(s.data.totalPages||1);else throw new Error("Invalid response structure");o(!1)}).catch(s=>{console.error("Error fetching blogs:",s),u("Failed to load blogs."),o(!1)})},[t]);const x=s=>{N(s)},f=()=>{t<i&&d(t+1)},v=()=>{t>1&&d(t-1)},y=Array.isArray(l)?m==="All"?l:l.filter(s=>s.category===m):[],A=(s,h)=>{const n=document.createElement("div");n.innerHTML=s;const r=n.textContent||n.innerText||"";return r.length>h?`${r.substring(0,h)}...`:r};return g?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading blogs..."})]}):c?e.jsx("p",{children:c}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mainblogheading",children:[e.jsx("h1",{style:{paddingTop:"1px"}}),e.jsx(S,{}),e.jsx("h1",{className:"blogheading",children:"Hi! Welcome to our Blogs "})]}),e.jsxs("div",{className:"py-5 bg-light",children:[e.jsx("h1",{className:"text-center supportheading",children:"Support"}),e.jsxs("div",{className:"text-center my-4",children:[e.jsx("button",{className:"btn btnoutline mx-2",onClick:()=>x("All"),children:"All"}),[...new Set(l.map(s=>s.category||"Uncategorized"))].map(s=>e.jsx("button",{className:"btn btnoutline mx-2",onClick:()=>x(s),children:s},s))]}),e.jsx("div",{className:"container mt-9",style:{marginTop:"100px"},children:y.map(s=>e.jsxs("div",{className:"row mb-5",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("img",{className:"img-fluid rounded",src:s.blogImage?`https://icellmobile.co.za/api/uploads/${s.blogImage}`:"default-placeholder.jpg",alt:s.title})}),e.jsxs("div",{className:"col-md-8 d-flex flex-column justify-content-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-muted mb-1",children:[s.postDate," |"," ",e.jsx("span",{className:"badge bgcolor ms-2",children:s.category||"Uncategorized"})]}),e.jsx("h2",{className:"h4 mb-3",children:s.title}),e.jsx("p",{className:"text-secondary",children:A(s.body,200)}),e.jsx("button",{className:"btn btn-link p-0",onClick:()=>b(`/BlogDetail/${s._id}`),children:"Read More"})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(E,{alt:s.username,src:s.userImage||"/default-avatar.jpg",sx:{width:40,height:40}}),e.jsxs("div",{className:"ms-2",children:[e.jsx("p",{className:"mb-0 fw-bold",children:s.username}),e.jsx("p",{className:"mb-0 text-muted",children:s.occupation})]})]})]})]},s._id))}),e.jsxs("div",{className:"pagination-container",children:[e.jsx("button",{className:"pagination-btn",onClick:v,disabled:t===1,children:"Previous"}),e.jsxs("span",{className:"pagination-text",children:["Page ",t," of ",i]}),e.jsx("button",{className:"pagination-btn",onClick:f,disabled:t===i,children:"Next"})]})]}),e.jsx(w,{})]})};export{R as default};
